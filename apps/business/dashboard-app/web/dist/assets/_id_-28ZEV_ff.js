import{c as G,b as H,d as c,y as T,u as e}from"./index-B6r6h-M4.js";import{M as L}from"./Modal-OohKvUJY.js";const d="menus",_="locations";function V({}){const{id:u}=G(),x=H(),[l,b]=c(null),[M,v]=c(!1),[C,y]=c(!1),[A,k]=c(!0),[O,h]=c(!1),[D,f]=c(!1),[w,N]=c([]);T(()=>{(async()=>{try{k(!0);const s=localStorage.getItem(d),n=localStorage.getItem(_),r=s?JSON.parse(s):[],o=n?JSON.parse(n):[],i=r.find(a=>a.id===u);if(i){if(b(i),i.location){const a=i.location.split(","),m=o.map(g=>({...g,selected:a.includes(g.id)}));N(m)}else if(o.length>0){const a=o.map((p,J)=>({...p,selected:J===0}));N(a);const m={...i,location:o[0].id,locationName:o[0].name,locationNames:[o[0].name]};b(m);const g=r.map(p=>p.id===m.id?m:p);localStorage.setItem(d,JSON.stringify(g))}}}catch(s){console.error("Error fetching data:",s)}finally{k(!1)}})()},[u]);const z=()=>{x("/items/menus")},I=()=>{x(`/items/menus/${u}/edit`),v(!1)},E=()=>{v(!1),h(!0)},R=()=>{try{const t=localStorage.getItem(d);if(t){const n=JSON.parse(t).filter(r=>r.id!==u);localStorage.setItem(d,JSON.stringify(n)),x("/items/menus")}}catch(t){console.error("Error deleting menu:",t)}finally{h(!1)}},B=async()=>{try{if(!l)return;const t=w.filter(n=>n.selected);if(t.length===0)return;const s=localStorage.getItem(d);if(s){const n=JSON.parse(s);let r="";t.length===1?r=t[0].name:t.length>1&&(r=`${t.length} locations`);const o={...l,location:t.map(a=>a.id).join(","),locationName:r,locationNames:t.map(a=>a.name),updatedAt:new Date().toISOString()},i=n.map(a=>a.id===l.id?o:a);localStorage.setItem(d,JSON.stringify(i)),b(o),f(!1)}}catch(t){console.error("Error updating menu locations:",t)}},S=()=>{console.log("Add menu group"),y(!1)},j=()=>{console.log("Add modifier"),y(!1)};return A?e("div",{className:"flex items-center justify-center min-h-screen",children:e("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):l?e("div",{className:"container mx-auto px-4 py-6",children:[e("div",{className:"flex items-center justify-between mb-6",children:[e("div",{className:"flex items-center space-x-4",children:[e("button",{onClick:z,className:"p-2 rounded-full hover:bg-gray-100","aria-label":"Back to menus",children:e("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"})})}),e("h1",{className:"text-2xl font-semibold text-gray-900",children:l.name}),e("div",{className:"relative",children:[e("button",{onClick:()=>v(!M),className:"p-1 rounded-full hover:bg-gray-100","aria-label":"Menu actions",children:e("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{d:"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"})})}),M&&e("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-10",children:[e("button",{onClick:I,className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Edit Menu"}),e("button",{onClick:E,className:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-100",children:"Delete Menu"})]})]})]}),e("div",{className:"relative",children:[e("button",{onClick:()=>y(!C),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e("svg",{xmlns:"http://www.w3.org/2000/svg",className:"-ml-1 mr-2 h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{fillRule:"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z",clipRule:"evenodd"})}),"Add"]}),C&&e("div",{className:"absolute right-0 mt-2 w-56 bg-white rounded-md shadow-lg py-1 z-10",children:[e("button",{onClick:S,className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Menu Group"}),e("button",{onClick:j,className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Modifier"})]})]})]}),e("div",{className:"mb-8",children:e("div",{className:"flex items-center text-sm text-gray-600",children:[e("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{fillRule:"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"})}),e("span",{className:"font-medium",children:"Locations:"}),e("div",{className:"ml-2 flex items-center flex-wrap gap-2",children:l?.locationNames&&l.locationNames.length>0?e("div",{className:"flex flex-col space-y-1",children:l.locationNames?.map((t,s)=>e("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:t},s))}):l?.locationName?e("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:l.locationName}):e("span",{className:"text-sm text-gray-500 italic",children:"No location selected"})}),e("button",{onClick:()=>f(!0),className:"ml-2 text-blue-600 hover:text-blue-800 text-sm",children:"Edit"})]})}),e(L,{isOpen:D,onClose:()=>f(!1),title:"Update Menu Locations",children:e("div",{className:"space-y-4",children:[e("p",{className:"text-sm text-gray-600",children:"Select locations where this menu should be available:"}),e("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:w.map(t=>e("label",{className:"flex items-center space-x-2 p-2 hover:bg-gray-50 rounded",children:[e("input",{type:"checkbox",checked:t.selected||!1,onChange:()=>{const s=w.map(n=>n.id===t.id?{...n,selected:!n.selected}:n);N(s)},className:"h-4 w-4 text-blue-600 rounded border-gray-300 focus:ring-blue-500"}),e("span",{className:"text-sm text-gray-700",children:t.name})]},t.id))}),e("div",{className:"flex justify-end space-x-3 pt-4",children:[e("button",{type:"button",onClick:()=>f(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Cancel"}),e("button",{type:"button",onClick:B,className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Save Changes"})]})]})}),e("div",{className:"mt-16 text-center",children:[e("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})}),e("h3",{className:"mt-2 text-lg font-medium text-gray-900",children:"Your menu is empty"}),e("p",{className:"mt-1 text-sm text-gray-500",children:"Create a menu group to get started"}),e("div",{className:"mt-6",children:e("button",{onClick:S,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e("svg",{xmlns:"http://www.w3.org/2000/svg",className:"-ml-1 mr-2 h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{fillRule:"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z",clipRule:"evenodd"})}),"Create Menu Group"]})})]}),e(L,{isOpen:O,onClose:()=>h(!1),title:"Delete Menu",size:"sm",children:[e("p",{className:"text-sm text-gray-600 mb-6",children:"Are you sure you want to delete this menu? This action cannot be undone."}),e("div",{className:"flex justify-end space-x-3",children:[e("button",{type:"button",onClick:()=>h(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Cancel"}),e("button",{type:"button",onClick:R,className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-red-600 hover:bg-red-700",children:"Delete"})]})]})]}):e("div",{className:"flex items-center justify-center min-h-screen",children:e("p",{children:"Menu not found"})})}export{V as default};
