import{d as x,A as Y,y as D,u as e,c as ee}from"./index-CA4Nvb-W.js";import{M as G}from"./Modal-BTfxsx6v.js";const E=({children:r,className:u=""})=>e("span",{className:`inline-block ${u}`,style:{lineHeight:"1em"},children:r}),te=({className:r=""})=>e(E,{className:r,children:"ðŸ”"}),ae=({className:r=""})=>e(E,{className:r,children:"â¹ï¸"}),le=({className:r=""})=>e(E,{className:r,children:"â˜°"}),ne=({className:r=""})=>e(E,{className:r,children:"âœ•"}),J=({className:r=""})=>e(E,{className:r,children:"ï¼‹"}),Z=10,re=({menus:r,onMenuSelect:u,onMenuEdit:m,onMenuDelete:w,onCreateNew:y,onUpdateMenus:H})=>{const[L,F]=x("list"),[S,A]=x(""),[z,P]=x("all"),[o,k]=x(1),[f,b]=x(null),v=Y(null),h=Y({}),M=Array.from(new Set(r.flatMap(t=>t.locationNames||[]))).map(t=>({id:t.toLowerCase().replace(/\s+/g,"-"),name:t})),N=r.filter(t=>{const l=t.name.toLowerCase().includes(S.toLowerCase())||(t.description?.toLowerCase().includes(S.toLowerCase())??!1),s=z==="all"||t.locationNames&&t.locationNames.includes(z);return l&&s}),d=Math.ceil(N.length/Z),I=o*Z,V=I-Z,O=N.slice(V,I),R=t=>k(t),T=()=>k(t=>Math.min(t+1,d)),B=()=>k(t=>Math.max(t-1,1)),U=t=>t?new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A",W=(t,l)=>{t.target.closest('button, a, [role="menuitem"]')||u(l)(t)},$=t=>{b(f===t?null:t)};D(()=>{const t=l=>{v.current&&!v.current.contains(l.target)&&b(null)};return document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}},[]);const j=(t,l)=>{h.current[l]=t};return D(()=>{typeof window<"u"&&localStorage.setItem("menuViewMode",L)},[L]),e("div",{className:"bg-white min-h-screen p-0",children:[e("div",{className:"space-y-6",children:[e("div",{className:"flex justify-between items-center",children:[e("h1",{className:"text-2xl font-bold text-gray-900",children:"Menus"}),e("button",{onClick:y,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e(J,{className:"-ml-1 mr-2 h-4 w-4"}),"Create Menu"]})]}),e("p",{className:"text-sm text-gray-500",children:"Use menus to sell your items on kiosks, delivery apps, online ordering sites and any restaurant POS modes."}),e("div",{className:"flex flex-col sm:flex-row gap-4 justify-between items-start sm:items-center",children:[e("div",{className:"relative w-full sm:w-64",children:[e("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e(te,{className:"h-4 w-4 text-gray-400"})}),e("input",{type:"text",placeholder:"Search menus...",value:S,onChange:t=>{A(t.currentTarget.value),k(1)},className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"}),S&&e("button",{onClick:()=>A(""),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:e(ne,{className:"h-4 w-4 text-gray-400 hover:text-gray-500"})})]}),e("div",{className:"w-full sm:w-48",children:e("select",{value:z,onChange:t=>{P(t.currentTarget.value),k(1)},className:"block w-full pl-3 pr-10 py-2 text-base border border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",children:[e("option",{value:"all",children:"All Locations"}),M.map(({id:t,name:l})=>e("option",{value:l,children:l},t))]})}),e("div",{className:"flex rounded-md shadow-sm",children:[e("button",{type:"button",onClick:()=>F("grid"),className:`relative inline-flex items-center px-3 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium ${L==="grid"?"bg-gray-100 text-blue-600":"text-gray-500 hover:bg-gray-50"}`,"aria-label":"Grid view",children:e(ae,{className:"h-4 w-4"})}),e("button",{type:"button",onClick:()=>F("list"),className:`relative inline-flex items-center px-3 py-2 rounded-r-md border border-l-0 border-gray-300 bg-white text-sm font-medium ${L==="list"?"bg-gray-100 text-blue-600":"text-gray-500 hover:bg-gray-50"}`,"aria-label":"List view",children:e(le,{className:"h-4 w-4"})})]})]})]}),e("div",{className:"border-t border-gray-200 my-4"}),e("div",{className:"mt-6",children:N.length===0?e("div",{className:"text-center py-12 bg-white rounded-lg shadow",children:[e("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),e("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No menus found"}),e("p",{className:"mt-1 text-sm text-gray-500",children:S||z!=="all"?"Try adjusting your search or filter criteria.":"Get started by creating a new menu."}),e("div",{className:"mt-6",children:e("button",{type:"button",onClick:y,className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e(J,{className:"-ml-1 mr-2 h-4 w-4"}),"New Menu"]})})]}):L==="list"?e("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg",children:[e("div",{className:"overflow-x-auto",children:e("table",{className:"min-w-full divide-y divide-gray-200",children:[e("thead",{className:"bg-gray-50",children:e("tr",{children:[e("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Menu Name"}),e("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"}),e("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Updated"}),e("th",{scope:"col",className:"relative px-6 py-3",children:e("span",{className:"sr-only",children:"Actions"})})]})}),e("tbody",{className:"bg-white divide-y divide-gray-200",children:O.map(t=>e("tr",{onClick:l=>W(l,t),className:"hover:bg-gray-50 cursor-pointer",children:[e("td",{className:"px-6 py-4 whitespace-nowrap",children:e("div",{className:"flex items-center",children:[e("div",{className:"flex-shrink-0 h-10 w-10 flex items-center justify-center rounded-full bg-blue-100 text-blue-600 font-medium",children:t.name.charAt(0).toUpperCase()}),e("div",{className:"ml-4",children:[e("div",{className:"text-sm font-medium text-gray-900",children:t.name}),e("div",{className:"text-sm text-gray-500",children:[t.items?.length||0," ",t.items?.length===1?"item":"items"]})]})]})}),e("td",{className:"px-6 py-4 whitespace-nowrap",children:e("div",{className:"text-sm text-gray-900",children:t.locationName||t.location||"No location"})}),e("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:U(t.updatedAt)}),e("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e("div",{className:"flex items-center justify-end gap-6",children:[t.isNew&&e("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"New"}),e("div",{className:"relative",ref:v,children:[e("button",{type:"button",ref:l=>j(l,t.id),onClick:l=>{l.stopPropagation(),$(t.id)},className:"text-gray-400 hover:text-gray-500 focus:outline-none","aria-haspopup":"true","aria-expanded":f===t.id,children:[e("span",{className:"sr-only",children:"Open options"}),e("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{d:"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"})})]}),f===t.id&&e("div",{className:"origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none z-10",role:"menu","aria-orientation":"vertical","aria-labelledby":"options-menu",children:e("div",{className:"py-1",role:"none",children:[e("button",{onClick:l=>{l.stopPropagation(),m(t),b(null)},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-gray-900",role:"menuitem",children:"Edit"}),e("button",{onClick:l=>{l.stopPropagation(),w(t),b(null)},className:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-100",role:"menuitem",children:"Delete"})]})})]})]})})]},t.id))})]})}),d>1&&e("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:e("div",{className:"flex-1 flex justify-between sm:justify-between",children:[e("div",{children:e("p",{className:"text-sm text-gray-700",children:["Showing ",e("span",{className:"font-medium",children:V+1})," to"," ",e("span",{className:"font-medium",children:Math.min(I,N.length)})," ","of ",e("span",{className:"font-medium",children:N.length})," results"]})}),e("div",{children:e("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[e("button",{onClick:B,disabled:o===1,className:`relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium ${o===1?"text-gray-300 cursor-not-allowed":"text-gray-500 hover:bg-gray-50"}`,children:[e("span",{className:"sr-only",children:"Previous"}),e("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:e("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})})]}),Array.from({length:Math.min(5,d)},(t,l)=>{let s;return d<=5||o<=3?s=l+1:o>=d-2?s=d-4+l:s=o-2+l,s<1||s>d?null:e("button",{onClick:()=>R(s),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${o===s?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:s},s)}),e("button",{onClick:T,disabled:o===d,className:`relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium ${o===d?"text-gray-300 cursor-not-allowed":"text-gray-500 hover:bg-gray-50"}`,children:[e("span",{className:"sr-only",children:"Next"}),e("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:e("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})]})]})})]})})]}):e("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:O.map(t=>e("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:e("div",{className:"p-6",children:[e("div",{className:"flex items-center",children:[e("div",{className:"flex-shrink-0 bg-blue-500 rounded-md p-3",children:e("svg",{className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),e("div",{className:"ml-5 w-0 flex-1",children:[e("div",{className:"flex items-center justify-between",children:[e("h3",{className:"text-lg font-medium text-gray-900",children:t.name}),t.isNew&&e("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"New"})]}),e("p",{className:"mt-1 text-sm text-gray-500",children:t.locationName||t.location||"No location"})]})]}),e("div",{className:"mt-6 flex justify-end relative z-10",children:e("div",{className:"relative",ref:v,style:{position:"relative",zIndex:f===`grid-${t.id}`?1e3:"auto"},children:[e("button",{type:"button",ref:l=>j(l,`grid-${t.id}`),onClick:l=>{l.stopPropagation(),$(`grid-${t.id}`)},className:"text-gray-400 hover:text-gray-500 focus:outline-none","aria-haspopup":"true","aria-expanded":f===`grid-${t.id}`,children:[e("span",{className:"sr-only",children:"Open options"}),e("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{d:"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"})})]}),f===`grid-${t.id}`&&e("div",{className:"origin-top-right fixed right-4 mt-1 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none z-50",role:"menu","aria-orientation":"vertical","aria-labelledby":"options-menu",children:e("div",{className:"py-1",role:"none",children:[e("button",{onClick:l=>{l.stopPropagation(),m(t),b(null)},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-gray-900",role:"menuitem",children:"Edit"}),e("button",{onClick:l=>{l.stopPropagation(),u(t)(l),b(null)},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-gray-900",role:"menuitem",children:"View"}),e("button",{onClick:l=>{l.stopPropagation(),w(t),b(null)},className:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-100",role:"menuitem",children:"Delete"})]})})]})})]})},t.id))})}),e("div",{className:"mt-6",children:N.length===0?e("div",{className:"text-center py-12 bg-white rounded-lg shadow",children:[e("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),e("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No menus found"}),e("p",{className:"mt-1 text-sm text-gray-500",children:S||z!=="all"?"Try adjusting your search or filter criteria.":"Get started by creating a new menu."}),e("div",{className:"mt-6",children:e("button",{type:"button",onClick:y,className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e(J,{className:"-ml-1 mr-2 h-4 w-4"}),"New Menu"]})})]}):L==="list"?e("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg",children:[e("div",{className:"overflow-x-auto",children:e("table",{className:"min-w-full divide-y divide-gray-200",children:[e("thead",{className:"bg-gray-50",children:e("tr",{children:[e("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Menu Name"}),e("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"}),e("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Updated"}),e("th",{scope:"col",className:"relative px-6 py-3",children:e("span",{className:"sr-only",children:"Actions"})})]})}),e("tbody",{className:"bg-white divide-y divide-gray-200",children:O.map(t=>e("tr",{onClick:l=>W(l,t),className:"hover:bg-gray-50 cursor-pointer",children:[e("td",{className:"px-6 py-4 whitespace-nowrap",children:e("div",{className:"flex items-center",children:[e("div",{className:"flex-shrink-0 h-10 w-10 flex items-center justify-center rounded-full bg-blue-100 text-blue-600 font-medium",children:t.name.charAt(0).toUpperCase()}),e("div",{className:"ml-4",children:[e("div",{className:"text-sm font-medium text-gray-900",children:t.name}),e("div",{className:"text-sm text-gray-500",children:[t.items?.length||0," ",t.items?.length===1?"item":"items"]})]})]})}),e("td",{className:"px-6 py-4 whitespace-nowrap",children:e("div",{className:"text-sm text-gray-900",children:t.locationName||t.location||"No location"})}),e("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:U(t.updatedAt)}),e("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e("div",{className:"flex items-center justify-end gap-6",children:[t.isNew&&e("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"New"}),e("div",{className:"relative",ref:v,children:[e("button",{type:"button",ref:l=>j(l,t.id),onClick:l=>{l.stopPropagation(),$(t.id)},className:"text-gray-400 hover:text-gray-500 focus:outline-none","aria-haspopup":"true","aria-expanded":f===t.id,children:[e("span",{className:"sr-only",children:"Open options"}),e("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{d:"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"})})]}),f===t.id&&e("div",{className:"origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none z-10",role:"menu","aria-orientation":"vertical","aria-labelledby":"options-menu",children:e("div",{className:"py-1",role:"none",children:[e("button",{onClick:l=>{l.stopPropagation(),m(t),b(null)},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-gray-900",role:"menuitem",children:"Edit"}),e("button",{onClick:l=>{l.stopPropagation(),w(t),b(null)},className:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-100",role:"menuitem",children:"Delete"})]})})]})]})})]},t.id))})]})}),d>1&&e("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:e("div",{className:"flex-1 flex justify-between sm:justify-between",children:[e("div",{children:e("p",{className:"text-sm text-gray-700",children:["Showing ",e("span",{className:"font-medium",children:V+1})," to"," ",e("span",{className:"font-medium",children:Math.min(I,N.length)})," ","of ",e("span",{className:"font-medium",children:N.length})," results"]})}),e("div",{children:e("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[e("button",{onClick:B,disabled:o===1,className:`relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium ${o===1?"text-gray-300 cursor-not-allowed":"text-gray-500 hover:bg-gray-50"}`,children:[e("span",{className:"sr-only",children:"Previous"}),e("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:e("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})})]}),Array.from({length:Math.min(5,d)},(t,l)=>{let s;return d<=5||o<=3?s=l+1:o>=d-2?s=d-4+l:s=o-2+l,s<1||s>d?null:e("button",{onClick:()=>R(s),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${o===s?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:s},s)}),e("button",{onClick:T,disabled:o===d,className:`relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium ${o===d?"text-gray-300 cursor-not-allowed":"text-gray-500 hover:bg-gray-50"}`,children:[e("span",{className:"sr-only",children:"Next"}),e("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:e("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})]})]})})]})})]}):e("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:O.map(t=>e("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:e("div",{className:"p-6",children:[e("div",{className:"flex items-center",children:[e("div",{className:"flex-shrink-0 bg-blue-500 rounded-md p-3",children:e("svg",{className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),e("div",{className:"ml-5 w-0 flex-1",children:[e("div",{className:"flex items-center justify-between",children:[e("h3",{className:"text-lg font-medium text-gray-900",children:t.name}),t.isNew&&e("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"New"})]}),e("p",{className:"mt-1 text-sm text-gray-500",children:t.locationName||t.location||"No location"})]})]}),e("div",{className:"mt-6 flex justify-end relative z-10",children:e("div",{className:"relative",ref:v,style:{position:"relative",zIndex:f===`grid-${t.id}`?1e3:"auto"},children:[e("button",{type:"button",ref:l=>j(l,`grid-${t.id}`),onClick:l=>{l.stopPropagation(),$(`grid-${t.id}`)},className:"text-gray-400 hover:text-gray-500 focus:outline-none","aria-haspopup":"true","aria-expanded":f===`grid-${t.id}`,children:[e("span",{className:"sr-only",children:"Open options"}),e("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{d:"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"})})]}),f===`grid-${t.id}`&&e("div",{className:"origin-top-right fixed right-4 mt-1 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none z-50",role:"menu","aria-orientation":"vertical","aria-labelledby":"options-menu",children:e("div",{className:"py-1",role:"none",children:[e("button",{onClick:l=>{l.stopPropagation(),m(t),b(null)},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-gray-900",role:"menuitem",children:"Edit"}),e("button",{onClick:l=>{l.stopPropagation(),u(t)(l),b(null)},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-gray-900",role:"menuitem",children:"View"}),e("button",{onClick:l=>{l.stopPropagation(),w(t),b(null)},className:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-100",role:"menuitem",children:"Delete"})]})})]})})]})},t.id))})})]})};function ie({isOpen:r=!1,onClose:u=()=>{},onCreateMenu:m=()=>{}}){return r?e("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md mx-4",children:[e("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Welcome to Menus"}),e("p",{className:"text-sm text-gray-600 mb-4",children:"Create your first menu to get started. You can add items, set locations and customise availability."}),e("div",{className:"flex justify-end gap-3",children:[e("button",{className:"px-4 py-2 bg-white border border-gray-300 rounded-md text-sm text-gray-700 hover:bg-gray-50",onClick:u,children:"Close"}),e("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-md text-sm hover:bg-blue-700",onClick:()=>{m()},children:"Create menu"})]})]})}):null}const _="menus",K=[{id:"1",name:"Breakfast Menu",description:"Start your day right with our breakfast selection",location:"1",locationName:"Main Branch",items:[],groups:[],modifiers:[],isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:"2",name:"Lunch Menu",description:"Delicious lunch options for everyone",location:"1",locationName:"Main Branch",items:[],groups:[],modifiers:[],isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:"3",name:"Dinner Menu",description:"A perfect way to end your day",location:"1",locationName:"Main Branch",items:[],groups:[],modifiers:[],isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}],se=`
  @keyframes modal-enter {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }
`,ce=()=>{const[r,u]=x({name:"",location:"sedave",locationName:"Main Branch",locationNames:[]}),[m,w]=x([]),[y,H]=x(null),[L,F]=x(!0),[S,A]=x(!1),[z,P]=x(!1),[o,k]=x(!1),f=ee(),[b,v]=x(!1),[h,M]=x([]),[N,d]=x("");D(()=>{const a=()=>{try{const i=localStorage.getItem("locations");if(i){const c=JSON.parse(i);if(Array.isArray(c)){const g=r.location?r.location.split(","):[],C=c.map(p=>({id:p.id||"",name:p.name||"Unnamed Location",type:p.type||"Dine-in",address:p.address||"",city:p.city||"",phone:p.phone||"",email:p.email||"",selected:g.includes(p.id)}));M(C),C.length>0&&!C.some(p=>p.selected)&&!r.location&&u(p=>({...p,location:C[0].id,locationName:C[0].name}))}else M([])}else M([])}catch(i){console.error("Error loading locations:",i),M([])}};a();const n=i=>{i.key==="locations"&&a()};return window.addEventListener("storage",n),()=>{window.removeEventListener("storage",n)}},[r.location]);const[I,V]=x(!1);D(()=>{(()=>{try{const n=localStorage.getItem(_);if(console.log("Saved menus from localStorage:",n?JSON.parse(n):"No saved menus"),n){const c=JSON.parse(n).map(g=>{if(!g.createdAt)return g;const C=new Date(g.createdAt),p=new Date;return p.setHours(p.getHours()-24),{...g,isNew:C>p}});w(c),console.log("Updated menus with isNew flag:",c)}else w(K),V(!0),A(!0)}catch(n){console.error("Error loading menus:",n),w(K)}finally{F(!1),A(!0)}})()},[]),D(()=>{m.length>0&&localStorage.setItem(_,JSON.stringify(m))},[m]);const O=a=>{if(a.preventDefault(),a.stopPropagation(),!r.name.trim()){alert("Please enter a menu name");return}if(!r.location){alert("Please select at least one location");return}const n=T(),i={id:n,name:r.name,description:"A new menu",location:r.location,locationName:r.locationName||"Multiple Locations",locationNames:r.locationNames||[],items:[],groups:[],modifiers:[],isActive:!0,isNew:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},c=[...m,i];console.log("New menu created:",i),console.log("All menus:",c),w(c),localStorage.setItem(_,JSON.stringify(c)),k(!1),u({name:"",location:"",locationName:""}),f(`/items/menus/${n}`)},R=!r.name.trim(),T=()=>Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),B=a=>n=>{if(n.preventDefault(),a==="blank"){const i=h.filter(g=>g.selected),c=i.length>0?i:[h[0]];u({name:"",location:c.map(g=>g.id).join(","),locationName:c.length===1?c[0].name:`${c.length} locations`,locationNames:c.map(g=>g.name)}),P(!1),k(!0)}else a==="duplicate"||a==="template"?console.log("Menu type:",a):(a==="import"||a==="upload")&&console.log("Menu import/upload:",a)},U=a=>{u(n=>({...n,name:a.currentTarget.value}))},W=a=>{if(confirm(`Are you sure you want to delete the menu "${a.name}"?`)){const n=m.filter(i=>i.id!==a.id);w(n),localStorage.setItem(_,JSON.stringify(n)),y?.id===a.id&&H(n[0]||null)}},$=a=>n=>{n.preventDefault(),n.stopPropagation(),f(`/items/menus/${a.id}`)},j=a=>{H(a),u({name:a.name||"",location:a.location||"",locationName:a.locationName||a.location||""}),P(!0)},t=a=>{M(n=>n.map(i=>i.id===a?{...i,selected:!i.selected}:i))},l=a=>{const n=a.target.checked,i=h.map(c=>({...c,selected:n}));M(i)},s=h.length>0&&h.every(a=>a.selected);D(()=>{if(h.length>0){const a=h.find(n=>n.selected)||h[0];a&&!r.location&&u(n=>({...n,location:a.id,locationName:a.name}))}},[h]);const X=a=>{a.preventDefault(),a.stopPropagation();const n=h.filter(i=>i.selected);if(n.length>0){const i=n.length===1?n[0].name:`${n.length} locations selected`,c=n.map(g=>g.id).join(",");u(g=>({...g,location:c,locationName:i,locationNames:n.map(C=>C.name)}))}else u(i=>({...i,location:"",locationName:"",locationNames:[]}))},q=a=>{X(a),v(!1)},Q=()=>{if(r.location){const a=r.location.split(",");M(n=>n.map(i=>({...i,selected:a.includes(i.id)})))}else M(a=>a.map(n=>({...n,selected:!1})));v(!0)};return L?e("div",{className:"flex items-center justify-center min-h-screen",children:e("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):(D(()=>{console.log("Current menus state:",m.map(a=>({id:a.id,name:a.name,isNew:a.isNew,createdAt:a.createdAt})))},[m]),y?e("div",{className:"min-h-screen bg-gray-50",children:e("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[e("div",{className:"flex justify-between items-center mb-6",children:[e("div",{children:[e("h1",{className:"text-2xl font-bold text-gray-900",children:y.name}),e("p",{className:"text-sm text-gray-500",children:y.location})]}),e("div",{className:"flex space-x-2",children:[e("button",{onClick:()=>j(y),className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Edit Menu"}),e("button",{onClick:()=>H(null),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Back to Menus"})]})]}),e("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg",children:[e("div",{className:"px-4 py-5 sm:px-6",children:[e("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Menu Items"}),e("p",{className:"mt-1 max-w-2xl text-sm text-gray-500",children:[y.items?.length||0," items in this menu"]})]}),e("div",{className:"border-t border-gray-200",children:!y.items||y.items.length===0?e("div",{className:"text-center py-12",children:[e("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 13h6m-3-3v6m-9 1V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2z"})}),e("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No items"}),e("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by adding a new item to this menu."}),e("div",{className:"mt-6",children:e("button",{type:"button",className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e("svg",{className:"-ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:e("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})}),"New Item"]})})]}):e("ul",{className:"divide-y divide-gray-200",children:(y.items||[]).map(a=>e("li",{className:"px-4 py-4 sm:px-6",children:e("div",{className:"flex items-center justify-between",children:[e("div",{className:"flex items-center",children:e("div",{className:"min-w-0 flex-1",children:[e("p",{className:"text-sm font-medium text-blue-600 truncate",children:a.name}),e("p",{className:"text-sm text-gray-500 truncate",children:a.description})]})}),e("div",{className:"ml-2 flex-shrink-0 flex",children:e("p",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:["$",a.price?.toFixed(2)||"0.00"]})})]})},a.id))})})]})]})}):e("div",{className:"min-h-screen bg-white",children:[e("style",{dangerouslySetInnerHTML:{__html:se}}),e("main",{className:"",children:e("div",{className:"max-w-7xl mx-auto",children:e(re,{menus:m,onMenuSelect:$,onMenuEdit:j,onMenuDelete:W,onCreateNew:()=>{H(null),u({name:"",location:h[0]?.id||"",locationName:h[0]?.name||"Main Dining"}),P(!0)}})})}),e(G,{isOpen:z,onClose:()=>P(!1),title:"Create a menu",description:"How would you like to start build menu?",size:"lg",textAlign:"left",children:e("div",{className:"mb-2 space-y-4",children:[e("button",{className:"w-full text-left border border-gray-200 rounded-lg p-4 hover:border-blue-400 hover:bg-blue-50 transition-colors",onClick:B("blank"),children:e("div",{className:"flex items-center",children:[e("span",{className:"inline-flex items-center justify-center p-3.5 mr-3 bg-gray-100 rounded",children:e("svg",{role:"img",viewBox:"0 0 14 14",className:"w-3 h-3",children:e("path",{d:"M8 14V8H14V6H8V0H6V6H0V8H6V14H8Z",fill:"black"})})}),e("div",{children:[e("div",{className:"font-medium text-gray-900",children:"Start from scratch"}),e("div",{className:"text-sm text-gray-400",children:"Add and organise items as you build a menu."})]})]})}),e("button",{className:`w-full text-left border rounded-lg p-4 transition-colors ${m.length===0?"bg-gray-50 border-gray-200 text-gray-400 cursor-not-allowed":"border-gray-200 hover:border-blue-300 hover:bg-blue-50"}`,onClick:()=>m.length>0&&B("import"),disabled:m.length===0,children:e("div",{className:"flex items-center",children:[e("svg",{role:"img",viewBox:"0 0 24 24",height:"40",width:"40",id:"",className:" p-2 mr-3 bg-gray-100 rounded inline-flex",children:e("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M20.71 7.7098L16.71 11.7098L15.3 10.2898L17.59 7.9998H4V5.9998H17.59L15.3 3.7098L16.71 2.2998L20.71 6.2998C21.1 6.6898 21.1 7.3198 20.71 7.7098ZM8.70006 20.2998L7.29006 21.7098L3.29006 17.7098C2.90006 17.3198 2.90006 16.6898 3.29006 16.2998L7.29006 12.2998L8.70006 13.7098L6.41006 15.9998H20.0001V17.9998H6.41006L8.70006 20.2998Z",fill:"black"})}),e("div",{children:[e("div",{className:"font-medium text-gray-900",children:"Import your menu from another platform"}),e("div",{className:"text-sm text-gray-400",children:"Import from other platforms, such as another POS or delivery service."})]})]})}),e("button",{className:"w-full  text-left border border-gray-200 rounded-lg p-4 hover:border-blue-400 hover:bg-blue-50 transition-colors",onClick:B("upload"),children:e("div",{className:"flex items-center",children:[e("svg",{role:"img",viewBox:"0 0 24 24",height:"40",width:"40",id:"",className:" p-2 mr-3 bg-gray-100 rounded inline-flex",children:e("path",{d:"M13 2H11H8C6.34 2 5 3.34 5 5V19C5 20.66 6.34 22 8 22H16C17.66 22 19 20.66 19 19V10V8L13 2ZM16.17 8H13V4.83L16.17 8ZM17 19C17 19.55 16.55 20 16 20H8C7.45 20 7 19.55 7 19V5C7 4.45 7.45 4 8 4H11V8V10H13H17V19Z",fill:"black"})}),e("div",{children:[e("div",{className:"font-medium text-gray-900",children:"Upload a file or photo of your existing menu"}),e("div",{className:"text-sm text-gray-400",children:"We'll automatically detect the format and convert it for you."})]})]})})]})}),e(G,{isOpen:b,onClose:()=>v(!1),title:"Select Location",size:"sm",width:"400px",className:"locations-modal",children:e("div",{className:"space-y-4",children:[e("p",{className:"text-sm text-gray-600",children:"Select locations where you'd like to offer this menu to your customers."}),e("div",{className:"relative",children:[e("input",{type:"text",placeholder:"Search locations...",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",value:N,onChange:a=>d(a.target.value)}),e("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:e("svg",{className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),e("div",{className:"border border-gray-200 rounded-md overflow-hidden",children:[e("div",{className:"px-4 py-3 bg-gray-50 border-b border-gray-200 flex items-center",children:[e("input",{id:"select-all-locations",type:"checkbox",className:"h-4 w-4 text-blue-600 rounded border-gray-300 focus:ring-blue-500",checked:s,onChange:l}),e("label",{htmlFor:"select-all-locations",className:"ml-2 text-sm font-medium text-gray-700",children:["Select All (",h.filter(a=>a.selected).length," of ",h.length," selected)"]})]}),e("div",{className:"divide-y divide-gray-200 max-h-60 overflow-y-auto",children:h.length===0?e("div",{className:"p-4 text-center text-sm text-gray-500",children:["No locations found. Please add locations in the",e("a",{href:"/settings/business/locations",className:"text-blue-600 hover:underline ml-1",onClick:a=>{a.preventDefault(),f("/settings/business/locations")},children:"Locations"})," page first."]}):h.filter(a=>a.name.toLowerCase().includes(N.toLowerCase())).map(a=>e("div",{className:`px-4 py-3 hover:bg-gray-50 cursor-pointer ${a.selected?"bg-blue-50":""}`,onClick:()=>t(a.id),children:e("div",{className:"flex items-center",children:[e("span",{className:`mr-3 h-5 w-5 flex items-center justify-center ${a.selected?"text-blue-600":"text-gray-400"}`,children:a.selected?e("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",children:e("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}):e("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",children:e("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm0-2a6 6 0 100-12 6 6 0 000 12z",clipRule:"evenodd"})})}),e("div",{children:[e("div",{className:"text-sm font-medium text-gray-900",children:a.name}),e("div",{className:"text-xs text-gray-500",children:[a.type," â€¢ ",a.address]})]})]})},a.id))})]}),e("div",{className:"flex justify-end space-x-3 pt-2",children:[e("button",{type:"button",onClick:()=>v(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),e("button",{type:"button",onClick:a=>{a.preventDefault(),a.stopPropagation(),q(a)},className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Done"})]})]})}),e(G,{isOpen:o,onClose:()=>k(!1),title:"Create Menu",size:"sm",width:"500px",showCloseButton:!1,children:e("div",{className:"space-y-6",children:[e("div",{className:"border border-gray-200  overflow-hidden",children:e("table",{className:"w-full",children:e("tbody",{children:[e("tr",{className:"border-b border-gray-200",children:[e("td",{className:"w-1/3 bg-gray-100 px-4 py-3 text-sm font-medium text-gray-700 border-r border-gray-200",children:"Menu Name"}),e("td",{className:"w-2/3",children:e("input",{type:"text",id:"menu-name",className:"w-full px-3 py-2 focus:outline-none bg-white",placeholder:"e.g., Coffee Menu",value:r.name,onInput:U})})]}),e("tr",{children:[e("td",{className:"w-1/3 bg-gray-100 px-4 py-3 text-sm font-medium text-gray-700 border-r border-gray-200",children:"Location"}),e("td",{className:"w-2/3",children:e("div",{className:"flex items-center justify-between w-full px-3 py-2",children:e("div",{className:"flex items-center w-full",children:[e("div",{className:"flex items-center flex-1",children:[e("span",{className:"text-gray-400",children:e("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{fillRule:"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"})})}),e("span",{className:"ml-2 text-gray-700",children:r.locationName||"Select location"})]}),e("button",{type:"button",onClick:a=>{a.stopPropagation(),Q()},className:"ml-2 text-sm text-blue-600 hover:text-blue-800 whitespace-nowrap",children:r.location?"Change":"Select"})]})})})]})]})})}),e("div",{className:"flex justify-between",children:[e("button",{type:"button",onClick:()=>k(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),e("button",{type:"button",onClick:O,disabled:R,className:`px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white ${R?"bg-gray-300 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"} focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500`,children:"Save"})]})]})}),e(ie,{isOpen:S&&I,onClose:()=>A(!1),onCreateMenu:()=>{A(!1),P(!0)}})]}))};export{ce as default};
