import{d as c,y as C,u as e,I as L}from"./index-CA4Nvb-W.js";import{M as k}from"./Modal-BTfxsx6v.js";function I(){const[h,l]=c(!1),[i,o]=c(null),[a,d]=c({name:"",type:"Dine-in",address:"",city:"",phone:"",email:""}),u=!!i,y={id:"default",name:"Main Branch",type:"Dine-in",address:"123 Main St",city:"Riyadh",phone:"+966 50 123 4567",email:"main@example.com"},[r,m]=c(()=>{const t=localStorage.getItem("locations");if(t){const n=JSON.parse(t);return n.some(p=>p.id==="default")?n:[y,...n]}return[y]}),s=t=>{const{name:n,value:g}=t.target;d(p=>({...p,[n]:g}))};C(()=>{localStorage.setItem("locations",JSON.stringify(r))},[r]);const f=()=>{if(!(!a.name||!a.address)){if(u&&i)m(r.map(t=>t.id===i.id?{...a,id:i.id}:t));else{const t={...a,id:Date.now().toString()};m([...r,t])}l(!1),o(null),d({name:"",type:"Dine-in",address:"",city:"",phone:"",email:""})}},b=t=>{o(t),d({name:t.name,type:t.type,address:t.address,city:t.city,phone:t.phone,email:t.email}),l(!0)},w=t=>{t!=="default"&&window.confirm("Are you sure you want to delete this location?")&&m(r.filter(n=>n.id!==t))},x=!a.name||!a.address,N=t=>{t.preventDefault(),t.stopPropagation(),console.log("Create button clicked, showing modal"),o(null),d({name:"",type:"Dine-in",address:"",city:"",phone:"",email:""}),l(!0)},v=()=>{console.log("Closing modal from handler"),l(!1),o(null)};return e("div",{className:"p-6",children:[e("div",{className:"flex justify-between items-center mb-6",children:[e("h1",{className:"text-2xl font-bold text-gray-800",children:"Locations"}),e("div",{children:e("button",{type:"button",onClick:N,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm font-medium flex items-center",children:[e("span",{className:"w-4 h-4 mr-2 flex items-center justify-center",children:L({type:"plus"})}),"Create Location"]})})]}),e("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e("div",{className:"overflow-x-auto",children:e("table",{className:"min-w-full divide-y divide-gray-200",children:[e("thead",{className:"bg-gray-50",children:e("tr",{children:[e("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location Name"}),e("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location Type"}),e("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Address"}),e("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"City"}),e("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Phone"}),e("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),e("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e("tbody",{className:"bg-white divide-y divide-gray-200",children:[r.map(t=>e("tr",{className:"hover:bg-gray-50",children:[e("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:t.name}),e("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t.type}),e("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t.address}),e("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t.city}),e("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t.phone}),e("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t.email}),e("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[e("button",{onClick:()=>b(t),className:"text-blue-600 hover:text-blue-900 mr-4",children:"Edit"}),t.id!=="default"&&e("button",{onClick:()=>w(t.id),className:"text-red-600 hover:text-red-800 disabled:opacity-50 disabled:cursor-not-allowed",children:"Delete"})]})]},t.id)),r.length===0&&e("tr",{children:e("td",{colSpan:7,className:"px-6 py-4 text-center text-sm text-gray-500",children:"No locations found. Create your first location to get started."})})]})]})})}),h&&e(k,{isOpen:h,onClose:v,title:u?"Edit Location":"Create Location",size:"sm",width:"500px",showCloseButton:!0,className:"locations-modal",overlayClassName:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e("div",{className:"space-y-6",children:[e("div",{className:"border border-gray-200 overflow-hidden rounded",children:e("table",{className:"w-full",children:e("tbody",{children:[e("tr",{className:"border-b border-gray-200",children:[e("td",{className:"w-1/3 bg-gray-100 px-4 py-3 text-sm font-medium text-gray-700 border-r border-gray-200",children:"Location Name"}),e("td",{className:"w-2/3",children:e("input",{type:"text",name:"name",className:"w-full px-3 py-2 focus:outline-none bg-white",placeholder:"e.g., Main Branch",value:a.name,onInput:s})})]}),e("tr",{className:"border-b border-gray-200",children:[e("td",{className:"w-1/3 bg-gray-100 px-4 py-3 text-sm font-medium text-gray-700 border-r border-gray-200",children:"Type"}),e("td",{className:"w-2/3",children:e("select",{name:"type",className:"w-full px-3 py-2 focus:outline-none bg-white",value:a.type,onChange:s,children:[e("option",{value:"Dine-in",children:"Dine-in"}),e("option",{value:"Takeaway",children:"Takeaway"}),e("option",{value:"Delivery",children:"Delivery"}),e("option",{value:"All",children:"All"})]})})]}),e("tr",{className:"border-b border-gray-200",children:[e("td",{className:"w-1/3 bg-gray-100 px-4 py-3 text-sm font-medium text-gray-700 border-r border-gray-200",children:"Address"}),e("td",{className:"w-2/3",children:e("input",{type:"text",name:"address",className:"w-full px-3 py-2 focus:outline-none bg-white",placeholder:"e.g., 123 Main St",value:a.address,onInput:s})})]}),e("tr",{className:"border-b border-gray-200",children:[e("td",{className:"w-1/3 bg-gray-100 px-4 py-3 text-sm font-medium text-gray-700 border-r border-gray-200",children:"City"}),e("td",{className:"w-2/3",children:e("input",{type:"text",name:"city",className:"w-full px-3 py-2 focus:outline-none bg-white",placeholder:"e.g., Riyadh",value:a.city,onInput:s})})]}),e("tr",{className:"border-b border-gray-200",children:[e("td",{className:"w-1/3 bg-gray-100 px-4 py-3 text-sm font-medium text-gray-700 border-r border-gray-200",children:"Phone"}),e("td",{className:"w-2/3",children:e("input",{type:"tel",name:"phone",className:"w-full px-3 py-2 focus:outline-none bg-white",placeholder:"e.g., +966 50 123 4567",value:a.phone,onInput:s})})]}),e("tr",{children:[e("td",{className:"w-1/3 bg-gray-100 px-4 py-3 text-sm font-medium text-gray-700 border-r border-gray-200",children:"Email"}),e("td",{className:"w-2/3",children:e("input",{type:"email",name:"email",className:"w-full px-3 py-2 focus:outline-none bg-white",placeholder:"e.g., contact@example.com",value:a.email,onInput:s})})]})]})})}),e("div",{className:"flex justify-between",children:[e("button",{type:"button",onClick:()=>l(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),e("button",{type:"button",onClick:f,disabled:x,className:`px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white ${x?"bg-gray-300 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"} focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500`,children:"Save"})]})]})})]})}export{I as default};
